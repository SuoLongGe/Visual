# APIæ¥å£æµ‹è¯•è¯´æ˜

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•æµ‹è¯•é—®é¢˜äº”çš„ä¸¤ä¸ªæ¥å£ã€‚

## ğŸ“‹ æ¥å£åˆ—è¡¨

1. **è·å–èŒä½ç»¼åˆæ’åæ•°æ®**
   - æ¥å£åœ°å€: `GET /api/industry/ranking/jobs`
   - åŠŸèƒ½: è·å–ç”¨äºç»˜åˆ¶"Math-Based å¤šç»´ Icon æŸ±çŠ¶å›¾"çš„æ•°æ®

2. **è·å–è¡Œä¸šåŒç¯åµŒå¥—ç«ç‘°å›¾æ•°æ®**
   - æ¥å£åœ°å€: `GET /api/industry/trend/rose`
   - åŠŸèƒ½: è·å–ç”¨äºç»˜åˆ¶"åŒç¯åµŒå¥—ç«ç‘°æåæ ‡é¥¼å›¾"çš„æ•°æ®

---

## ğŸš€ æ–¹æ³•ä¸€ï¼šä½¿ç”¨Pythonæµ‹è¯•è„šæœ¬ï¼ˆæ¨èï¼‰

### æ­¥éª¤ï¼š

1. **å¯åŠ¨æœåŠ¡å™¨**
   ```bash
   python app.py
   ```
   æˆ–è€…
   ```bash
   python start_server.py
   ```
   æœåŠ¡å™¨å°†åœ¨ `http://localhost:5000` å¯åŠ¨

2. **è¿è¡Œæµ‹è¯•è„šæœ¬**
   æ‰“å¼€æ–°çš„ç»ˆç«¯çª—å£ï¼Œè¿è¡Œï¼š
   ```bash
   python test_api.py
   ```

3. **æŸ¥çœ‹æµ‹è¯•ç»“æœ**
   è„šæœ¬ä¼šè‡ªåŠ¨æµ‹è¯•ä¸¤ä¸ªæ¥å£å¹¶æ˜¾ç¤ºè¯¦ç»†ç»“æœ

---

## ğŸŒ æ–¹æ³•äºŒï¼šä½¿ç”¨æµè§ˆå™¨

### æ­¥éª¤ï¼š

1. **å¯åŠ¨æœåŠ¡å™¨**ï¼ˆåŒä¸Šï¼‰

2. **åœ¨æµè§ˆå™¨ä¸­è®¿é—®**
   - èŒä½æ’åæ¥å£: http://localhost:5000/api/industry/ranking/jobs
   - è¡Œä¸šè¶‹åŠ¿æ¥å£: http://localhost:5000/api/industry/trend/rose

3. **æŸ¥çœ‹JSONå“åº”**
   æµè§ˆå™¨ä¼šç›´æ¥æ˜¾ç¤ºJSONæ ¼å¼çš„å“åº”æ•°æ®

---

## ğŸ’» æ–¹æ³•ä¸‰ï¼šä½¿ç”¨curlå‘½ä»¤

### Windows PowerShell:

```powershell
# æµ‹è¯•èŒä½æ’åæ¥å£
curl http://localhost:5000/api/industry/ranking/jobs

# æµ‹è¯•è¡Œä¸šè¶‹åŠ¿æ¥å£
curl http://localhost:5000/api/industry/trend/rose
```

### Windows CMD:

```cmd
# æµ‹è¯•èŒä½æ’åæ¥å£
curl http://localhost:5000/api/industry/ranking/jobs

# æµ‹è¯•è¡Œä¸šè¶‹åŠ¿æ¥å£
curl http://localhost:5000/api/industry/trend/rose
```

### Linux/Mac:

```bash
# æµ‹è¯•èŒä½æ’åæ¥å£
curl http://localhost:5000/api/industry/ranking/jobs | python -m json.tool

# æµ‹è¯•è¡Œä¸šè¶‹åŠ¿æ¥å£
curl http://localhost:5000/api/industry/trend/rose | python -m json.tool
```

---

## ğŸ“® æ–¹æ³•å››ï¼šä½¿ç”¨Postman

### æ­¥éª¤ï¼š

1. **å¯åŠ¨æœåŠ¡å™¨**ï¼ˆåŒä¸Šï¼‰

2. **åˆ›å»ºæ–°è¯·æ±‚**
   - æ‰“å¼€Postman
   - ç‚¹å‡» "New" â†’ "HTTP Request"

3. **é…ç½®è¯·æ±‚**
   - **èŒä½æ’åæ¥å£:**
     - Method: `GET`
     - URL: `http://localhost:5000/api/industry/ranking/jobs`
   
   - **è¡Œä¸šè¶‹åŠ¿æ¥å£:**
     - Method: `GET`
     - URL: `http://localhost:5000/api/industry/trend/rose`

4. **å‘é€è¯·æ±‚**
   - ç‚¹å‡» "Send" æŒ‰é’®
   - æŸ¥çœ‹å“åº”ç»“æœ

---

## ğŸ æ–¹æ³•äº”ï¼šä½¿ç”¨Python requestsï¼ˆäº¤äº’å¼ï¼‰

### åœ¨Pythonäº¤äº’ç¯å¢ƒä¸­ï¼š

```python
import requests
import json

# æµ‹è¯•èŒä½æ’åæ¥å£
response1 = requests.get("http://localhost:5000/api/industry/ranking/jobs")
print(json.dumps(response1.json(), indent=2, ensure_ascii=False))

# æµ‹è¯•è¡Œä¸šè¶‹åŠ¿æ¥å£
response2 = requests.get("http://localhost:5000/api/industry/trend/rose")
print(json.dumps(response2.json(), indent=2, ensure_ascii=False))
```

---

## âœ… é¢„æœŸå“åº”æ ¼å¼

### èŒä½æ’åæ¥å£å“åº”ç¤ºä¾‹ï¼š

```json
{
  "code": 200,
  "data": {
    "jobs": [
      {
        "job_title": "bfbc45b05c5a4425210cd2cb3d84ae09GC",
        "records_count": 0.85,
        "education_rank": 0.8,
        "experience_rank": 0.7,
        "composite_score": 0.75
      }
    ]
  },
  "message": "è·å–èŒä½ç»¼åˆæ’åæ•°æ®æˆåŠŸ",
  "status": "success",
  "timestamp": "2025-10-27T22:18:50.373049",
  "request_id": "ae6993da-522e-49e2-bfa4-87838fe75955"
}
```

### è¡Œä¸šè¶‹åŠ¿æ¥å£å“åº”ç¤ºä¾‹ï¼š

```json
{
  "code": 200,
  "data": {
    "industries": [
      {
        "company_type": "type_BLfSmG",
        "national_job_count": 21005,
        "avg_median_salary": 15.31,
        "avg_experience_rank": 0.75,
        "avg_education_rank": 0.68
      }
    ]
  },
  "message": "è·å–è¡Œä¸šè¶‹åŠ¿ç«ç‘°å›¾æ•°æ®æˆåŠŸ",
  "status": "success",
  "timestamp": "2025-10-27T22:18:50.373049",
  "request_id": "ae6993da-522e-49e2-bfa4-87838fe75955"
}
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### 1. è¿æ¥å¤±è´¥ (Connection Error)
- **åŸå› **: æœåŠ¡å™¨æœªå¯åŠ¨
- **è§£å†³**: å…ˆè¿è¡Œ `python app.py` å¯åŠ¨æœåŠ¡å™¨

### 2. æ–‡ä»¶æœªæ‰¾åˆ°é”™è¯¯
- **åŸå› **: æ•°æ®æ–‡ä»¶è·¯å¾„ä¸æ­£ç¡®
- **è§£å†³**: ç¡®ä¿ä»¥ä¸‹æ–‡ä»¶å­˜åœ¨ï¼š
  - `dataset/dataset/job_summary.xlsx`
  - `dataset/dataset/ç¬¬å››é¢˜/national_industry_stats.xlsx`

### 3. ç«¯å£è¢«å ç”¨
- **åŸå› **: 5000ç«¯å£å·²è¢«å…¶ä»–ç¨‹åºä½¿ç”¨
- **è§£å†³**: 
  - ä¿®æ”¹ `app.py` ä¸­çš„ç«¯å£å·
  - æˆ–å…³é—­å ç”¨5000ç«¯å£çš„ç¨‹åº

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. ç¡®ä¿æ•°æ®æ–‡ä»¶å­˜åœ¨äºæ­£ç¡®è·¯å¾„
2. ç¡®ä¿å·²å®‰è£…æ‰€æœ‰ä¾èµ–åŒ…ï¼ˆpandas, numpyç­‰ï¼‰
3. æœåŠ¡å™¨å¯åŠ¨åï¼Œä¿æŒç»ˆç«¯çª—å£æ‰“å¼€
4. æµ‹è¯•æ—¶ç¡®ä¿æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ

---

## ğŸ¯ å¿«é€Ÿæµ‹è¯•å‘½ä»¤

**ä¸€é”®æµ‹è¯•ï¼ˆéœ€è¦ä¸¤ä¸ªç»ˆç«¯çª—å£ï¼‰:**

ç»ˆç«¯1:
```bash
python app.py
```

ç»ˆç«¯2:
```bash
python test_api.py
```

