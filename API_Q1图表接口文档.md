# Q1 职位差异度分析接口文档

## 基础信息

- **基础URL**: `http://localhost:5001/api/q1`
- **返回格式**: JSON
- **字符编码**: UTF-8

## 接口列表

### 1. 获取代表性城市列表

获取20个代表性城市的列表。

**接口地址**: `/cities`

**请求方式**: `GET`

**请求参数**: 无

**返回示例**:
```json
{
  "code": 200,
  "message": "获取代表性城市成功",
  "data": {
    "cities": ["K445", "S335", "S213", ...]
  }
}
```

---

### 2. 获取散点气泡图数据

获取指定城市的散点气泡图数据，包含该城市招聘人数前200的职位信息。

**接口地址**: `/scatter`

**请求方式**: `GET`

**请求参数**:

| 参数名 | 类型   | 必填 | 说明   |
|--------|--------|------|--------|
| city   | string | 是   | 城市名称（例如：K445） |

**返回示例**:
```json
{
  "code": 200,
  "message": "获取城市 K445 散点图数据成功",
  "data": {
    "city": "K445",
    "total_jobs": 200,
    "data": [
      {
        "job_title": "Java开发工程师",
        "experience": "3-5年",
        "experience_value": 4.0,
        "salary": "15-25K",
        "salary_value": 20.0,
        "job_level": "优薪技能",
        "company_type": "互联网",
        "recruit_count": 156
      },
      ...
    ]
  }
}
```

**字段说明**:

- `job_title`: 职位名称
- `experience`: 原始经验要求文本
- `experience_value`: 经验要求数值化（年）
- `salary`: 原始薪资范围文本
- `salary_value`: 薪资中位数（K）
- `job_level`: 职位层级（基薪普及/平薪新人/优薪技能/高薪管理）
- `company_type`: 行业类别
- `recruit_count`: 该职位在该城市的招聘人数

---

### 3. 获取职位层级列表

获取所有职位层级（聚类类别）。

**接口地址**: `/job-levels`

**请求方式**: `GET`

**请求参数**: 无

**返回示例**:
```json
{
  "code": 200,
  "message": "获取职位层级成功",
  "data": {
    "job_levels": ["基薪普及", "平薪新人", "优薪技能", "高薪管理"]
  }
}
```

---

### 4. 获取行业类别列表

获取所有行业类别，可选按城市筛选。

**接口地址**: `/industries`

**请求方式**: `GET`

**请求参数**:

| 参数名 | 类型   | 必填 | 说明   |
|--------|--------|------|--------|
| city   | string | 否   | 城市名称（可选，用于获取特定城市的行业列表） |

**返回示例**:
```json
{
  "code": 200,
  "message": "获取行业类别成功",
  "data": {
    "industries": ["互联网", "金融", "教育", ...]
  }
}
```

---

## 错误码说明

| 错误码 | 说明 |
|--------|------|
| 200    | 成功 |
| 400    | 请求参数错误 |
| 404    | 资源不存在 |
| 500    | 服务器内部错误 |

## 数据说明

### 职位层级类型

系统将职位分为4个层级：

1. **基薪普及**: 基础薪资水平，普及型职位
2. **平薪新人**: 平均薪资水平，适合新人
3. **优薪技能**: 较高薪资，需要优秀技能
4. **高薪管理**: 高薪资，管理型职位

### 经验要求数值化规则

- "应届生"/"经验不限"/"在校生" → 0年
- "1-3年" → 2年（取中位数）
- "3-5年" → 4年（取中位数）
- "5年以上" → 7年（原值+2）

### 薪资数值化规则

- "5-10K" → 7.5K（取中位数）
- "10-15K" → 12.5K（取中位数）
- 以此类推

## 使用示例

### 获取北京（K445）的职位分布数据

```bash
curl "http://localhost:5001/api/q1/scatter?city=K445"
```

### 获取所有城市列表

```bash
curl "http://localhost:5001/api/q1/cities"
```

### 获取职位层级

```bash
curl "http://localhost:5001/api/q1/job-levels"
```

